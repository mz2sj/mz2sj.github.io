---
title: numpy知识点
date: 2020-12-16 10:30:38
tags: [numpy]
categories: [numpy]
---

记录一些常用函数和知识点

#### axis理解

[numpy中axis的理解](https://www.jianshu.com/p/9aa448ea397c)

![](https://upload-images.jianshu.io/upload_images/2233157-b77105789e36c847.jpg?imageMogr2/auto-orient/strip|imageView2/2/w/652/format/webp)

axis=0,沿着竖直方向操作，操作对象是水平的一行，

axis=1,沿着水平方向操作，操作对象是竖直的一列。

```python
>>>df = pd.DataFrame([[1, 1, 1, 1], [2, 2, 2, 2], [3, 3, 3, 3]], \
columns=["col1", "col2", "col3", "col4"])
>>>df
   col1  col2  col3  col4
    0     1     1     1     1
    1     2     2     2     2
    2     3     3     3     3
```

```python
>>> df.mean(axis=1)
0    1
1    2
2    3
```

如代码所示，axis=1表示沿水平方向操作相加求平均，操作对象是竖直的一列，也就是

```python
1     1     1     1     
2  +  2  +  2  +  2    
3     3     3     3     
```

同理看一下drop

```python
>>> df.drop("col4", axis=1)
   col1  col2  col3
0     1     1     1
1     2     2     2
2     3     3     3
```

drop的对象是一列，也就是drop下面这些列中的某一列

```python
1     1     1
1     2     2     
2     3     3   
```

sum和drop不同的的操作含义和axis结合起来可以产生不同的效果。

#### np.full()

创造全为某个值的数组

```python
np.full((2,5),6,dtype=np.int)

array([[6, 6, 6, 6, 6],
       [6, 6, 6, 6, 6]], dtype=uint32)
```

创造形状相同，值为某个值的数组

```python
x=np.arange(4,dtype=np.int64)
np.full_like(x,6)

array([6, 6, 6, 6], dtype=int64)
```

#### np.asscalar()

```python
x = np.array([30])
np.asscalar(x)
```

#### np.arange()

```python
np.arange(2, 101, 2)

array([  2,   4,   6,   8,  10,  12,  14,  16,  18,  20,  22,  24,  26,
        28,  30,  32,  34,  36,  38,  40,  42,  44,  46,  48,  50,  52,
        54,  56,  58,  60,  62,  64,  66,  68,  70,  72,  74,  76,  78,
        80,  82,  84,  86,  88,  90,  92,  94,  96,  98, 100])
```

#### np.linspace()

给定一段范围划分指定数目

```python
np.linspace(3., 10, 50)

array([  3.        ,   3.14285714,   3.28571429,   3.42857143,
         3.57142857,   3.71428571,   3.85714286,   4.        ,
         4.14285714,   4.28571429,   4.42857143,   4.57142857,
         4.71428571,   4.85714286,   5.        ,   5.14285714,
         5.28571429,   5.42857143,   5.57142857,   5.71428571,
         5.85714286,   6.        ,   6.14285714,   6.28571429,
         6.42857143,   6.57142857,   6.71428571,   6.85714286,
         7.        ,   7.14285714,   7.28571429,   7.42857143,
         7.57142857,   7.71428571,   7.85714286,   8.        ,
         8.14285714,   8.28571429,   8.42857143,   8.57142857,
         8.71428571,   8.85714286,   9.        ,   9.14285714,
         9.28571429,   9.42857143,   9.57142857,   9.71428571,
         9.85714286,  10.        ])
```

#### np.logspace()

同np.linspace(),只不过取了log

```python
np.logspace(3,10,50,endpoint=False)

array([  1.00000000e+03,   1.38038426e+03,   1.90546072e+03,
         2.63026799e+03,   3.63078055e+03,   5.01187234e+03,
         6.91830971e+03,   9.54992586e+03,   1.31825674e+04,
         1.81970086e+04,   2.51188643e+04,   3.46736850e+04,
         4.78630092e+04,   6.60693448e+04,   9.12010839e+04,
         1.25892541e+05,   1.73780083e+05,   2.39883292e+05,
         3.31131121e+05,   4.57088190e+05,   6.30957344e+05,
         8.70963590e+05,   1.20226443e+06,   1.65958691e+06,
         2.29086765e+06,   3.16227766e+06,   4.36515832e+06,
         6.02559586e+06,   8.31763771e+06,   1.14815362e+07,
         1.58489319e+07,   2.18776162e+07,   3.01995172e+07,
         4.16869383e+07,   5.75439937e+07,   7.94328235e+07,
         1.09647820e+08,   1.51356125e+08,   2.08929613e+08,
         2.88403150e+08,   3.98107171e+08,   5.49540874e+08,
         7.58577575e+08,   1.04712855e+09,   1.44543977e+09,
         1.99526231e+09,   2.75422870e+09,   3.80189396e+09,
         5.24807460e+09,   7.24435960e+09])
```

#### np.diagonal()

输出对角线，矩阵的迹

```python
X = np.array([[ 0, 1, 2, 3], [ 4, 5, 6, 7], [ 8, 9, 10, 11]])
np.diag(X)
X.diagonal()

array([ 0,  5, 10])
```

创造对角线指定值，其余为0的矩阵

```python
np.diagflat([1,2,3,4])

array([[1, 0, 0, 0],
       [0, 2, 0, 0],
       [0, 0, 3, 0],
       [0, 0, 0, 4]])
```

#### np.tri()

创造对角线指定方向上下为1，其余为0的矩阵

```python
np.tri(5,5,1)
array([[1., 1., 0., 0., 0.],
       [1., 1., 1., 0., 0.],
       [1., 1., 1., 1., 0.],
       [1., 1., 1., 1., 1.],
       [1., 1., 1., 1., 1.]])

np.tri(5,5,0)
array([[1., 0., 0., 0., 0.],
       [1., 1., 0., 0., 0.],
       [1., 1., 1., 0., 0.],
       [1., 1., 1., 1., 0.],
       [1., 1., 1., 1., 1.]])

np.tri(5,5,-1)
array([[0., 0., 0., 0., 0.],
       [1., 0., 0., 0., 0.],
       [1., 1., 0., 0., 0.],
       [1., 1., 1., 0., 0.],
       [1., 1., 1., 1., 0.]])
```

```python
#下三角 对角线以下保留，以上为0
np.tril(np.arange(1, 13).reshape(4, 3), -1)
array([[ 0,  0,  0],
       [ 4,  0,  0],
       [ 7,  8,  0],
       [10, 11, 12]])

np.triu(np.arange(1, 13).reshape(4, 3), -1)
array([[ 1,  2,  3],
       [ 4,  5,  6],
       [ 0,  8,  9],
       [ 0,  0, 12]])
```

#### 打平

```python
x = np.array([[1, 2, 3], [4, 5, 6]])
out1=np.ravel(x,order='F')
out2=x.flatten(order='F')
```

#### np.swapaxes()

```python
x=np.zeros((3,4,5))
out1=np.swapaxes(x,1,0)
out2=x.transpose([1,0,2])
```

#### np.expand_dims()

```python
x=np.zeros((3,4))
np.expand_dims(x,axis=1)
np.squeeze(x)
```

#### np.concatenate()

```python
x = np.array([[1, 2, 3], [4, 5, 6]])
y = np.array([[7, 8, 9], [10, 11, 12]])
out1 = np.concatenate((x, y), 1) #水平方向操作，竖直为操作对象
out2 = np.hstack((x, y)) #水平方向堆叠
```

```python
#按列来堆叠
x = np.array((1,2,3))
y = np.array((4,5,6))
out1 = np.column_stack((x, y))
```

```python
x = np.array([[1],[2],[3]])
y = np.array([[4],[5],[6]])
out = np.dstack((x, y))

[[[1 4]]

 [[2 5]]

 [[3 6]]]
```

#### np.split()

```python
x = np.arange(1, 10)
np.split(x, [4, 6])

[array([1, 2, 3, 4]), array([5, 6]), array([7, 8, 9])]    

```

